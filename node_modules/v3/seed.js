var mongoose=require('mongoose');

var Campground=require('./models/camp');
var Comment=require('./models/comment');

var data=[  {name: "Shimla", image : "http://www.hailhimalayas.com/wp-content/uploads/2014/11/Slide-3.jpg", description: "xyz" },
            {name: "Mountain-Hills", image : "https://d27k8xmh3cuzik.cloudfront.net/wp-content/uploads/2017/09/Cover8.jpg", description: "xyz" }];

function seedDB(){
    Campground.deleteMany({},function(err){
        if(err){
            console.log(err);
        }
            console.log('all campgrounds removed');
            data.forEach(function(seed){
                Campground.create(seed,function(err,campground){
                    if(err){
                        console.log(err);
                    }
                    else{
                        Comment.create({
                            text: 'Assume place to visit I wish there was internet',
                            author: 'Homer'
                        },function(err,comment){
                            campground.comments.push(comment);
                            campground.save();
                            console.log('New comment with campground created');
                        });
                    }
                });
            });
    
    });
        
    
}



module.exports=seedDB;